<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Data Uploader</title>
        <style>
            section {
                display: flex;
                max-width: 500px;
                margin: 30px auto 0 auto;
            }
            section .content {
                padding-left: 30px;
                align-self: center;
            }
        </style>
        <script type="text/javascript" src="data.js"></script>
        <script>
            console.log(window.dataJson);
        </script>
    </head>
    <body>
        <section>
            <div class="image-wrapper">
                <img
                    width="150"
                    height="150"
                    id="profilePic"
                    src="https://via.placeholder.com/150x150.png?text=Default"
                    alt
                />
            </div>
            <div class="content">
                <label for="person">Name</label>
                <input type="text" name="person" id="person" value="initializing...." />
                <hr />
                <label for="phone">Phone</label>
                <input type="text" name="phone" id="phone" value="initializing...." />
            </div>
        </section>

        <script>
            function init() {
                // Parse JSON string into object
                var jsonData = dataJson;
                var targetImage = document.getElementById("profilePic");
                var nameField = document.getElementById("person");
                var phoneField = document.getElementById("phone");

                if (jsonData.length > 0 && jsonData[0]) {
                    if (jsonData[0].person.length > 0) {
                        nameField.value = jsonData[0].person;
                    } else {
                        nameField.value = "Default Name";
                    }
                    if (jsonData[0].phone.length > 0) {
                        phoneField.value = jsonData[0].phone;
                    } else {
                        phoneField.value = "888-888-8888";
                    }
                    if (jsonData[0].profilePic.length > 0) {
                        targetImage.src = jsonData[0].profilePic;
                    } else {
                        targetImage.src = "https://via.placeholder.com/150x150.png?text=Default";
                    }
                }
            }

            window.onload = function (event) {
                // artificial delay
                setTimeout(function () {
                    init();
                }, 1000); // one second
            };

            // templating system ideas:
            // https://jsfiddle.net/at2h6ob0/
            // https://johnresig.com/blog/javascript-micro-templating/
        </script>
    </body>
</html>
